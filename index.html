
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Escape Room Naomi</title>
  <style>
    body {
      background-color: black;
      color: red;
      font-family: 'Courier New', monospace;
      text-align: center;
      margin: 0;
      padding: 0;
      overflow: hidden;
    }
    .hidden { display: none; }
    #game-container {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      flex-direction: column;
    }
    input {
      background: black;
      border: 1px solid red;
      color: red;
      padding: 10px;
      margin-top: 15px;
      font-size: 18px;
      text-align: center;
    }
    button {
      background: red;
      color: black;
      border: none;
      padding: 10px 20px;
      font-size: 18px;
      margin-top: 10px;
      cursor: pointer;
    }
    img {
      max-height: 90vh;
      max-width: 90vw;
      margin: 10px auto;
      border: 2px solid red;
      border-radius: 10px;
    }
  </style>
</head>
<body>
  <div id="game-container">
    <h1>Escape Room ~ Naomi</h1>
    <p id="text">Level 1: The beginning... Can you guess the code?</p>
    <input type="text" id="answer" placeholder="Enter your answer" />
    <button onclick="checkAnswer()">Submit</button>
  </div>

  <script>
    const container = document.getElementById('game-container');
    const text = document.getElementById('text');
    const input = document.getElementById('answer');

    let currentLevel = 1;
    let currentImages = [];
    let showingImages = false;

    // Define answers for each level
    const answers = {
      1: 'key',
      2: 'shadow',
      3: 'freedom'
    };

    function checkAnswer() {
      if (showingImages) return;
      const userAnswer = input.value.trim().toLowerCase();
      if (userAnswer === answers[currentLevel]) {
        showImagesForLevel(currentLevel);
      } else {
        // Restart same level
        text.innerText = `Wrong answer. Try again from the start of Level ${currentLevel}.`;
        setTimeout(() => startLevel(currentLevel), 2000);
      }
    }

    function startLevel(level) {
      showingImages = false;
      container.innerHTML = `
        <h1>Escape Room ~ Naomi</h1>
        <p id="text">Level ${level}: ${levelText(level)}</p>
        <input type="text" id="answer" placeholder="Enter your answer" />
        <button onclick="checkAnswer()">Submit</button>
      `;
    }

    function levelText(level) {
      if (level === 1) return "The beginning... Can you guess the code?";
      if (level === 2) return "The second gate... What hides in the dark?";
      if (level === 3) return "Final challenge... Only the worthy escape.";
      return "";
    }

    async function showImagesForLevel(level) {
      showingImages = true;
      container.innerHTML = `<p>Level ${level} cleared... Enjoy your reward üòà</p>`;
      const folder = `gioco${level}`;
      try {
        // Fetch image list dynamically (works on most hosting like GitHub Pages if images are accessible)
        const imageList = await fetchImages(folder);
        for (let img of imageList) {
          container.innerHTML = `<img src="${folder}/${img}" alt="Reward Image">`;
          await new Promise(r => setTimeout(r, 5000)); // 5 seconds per image
        }
      } catch {
        container.innerHTML = `<p>Error loading images for Level ${level}.</p>`;
      }
      nextLevel(level);
    }

    async function fetchImages(folder) {
      // Manual lists (in case directory listing is disabled)
      if (folder === 'gioco1')
        return ['00021-82332019.png'];
      if (folder === 'gioco2')
        return ['00004-3322706282.png', '00025-1170554781.png'];
      if (folder === 'gioco3')
        return ['00014-4236161737.png', '00019-44953898.png', '00022-2895341385.png', '00026-981262183.png', '00059-1723081275.png', '00065-1723081281.png'];
      return [];
    }

    function nextLevel(level) {
      if (level < 3) {
        currentLevel++;
        setTimeout(() => startLevel(currentLevel), 2000);
      } else {
        container.innerHTML = `
          <h2>You survived... for now. üî•</h2>
          <p>Naomi is watching. üëÅÔ∏è</p>
        `;
      }
    }
  </script>
</body>
</html>
